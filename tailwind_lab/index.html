<!DOCTYPE html>
<html class="bg-white dark:bg-slate-800 text-white">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tailwind CSS Playground</title>
    <link rel="stylesheet" href="./dist/output.css" />
  </head>
  <body class="">
    <h1 class="text-3xl font-bold">Tailwind Lab</h1>
    <p class="text-lg">This is a playground for Tailwind CSS.</p>
    <hr />
    <br/>
    <br/>
    <h2 class="text-2xl font-bold">Freight Rate Entry</h2>
    <form class="m-2">
      <!-- freight code -->
      <div class="flex flex-col">
        <label for="freight_code"><u>F</u>reight Code</label>
        <input
          type="text"
          id="freight_code"
          name="freight_code"
          minlength="3"
          maxlength="20"
          placeholder="[freight code]"
        />
      </div>
      <div class="flex flex-col">
        <label for="origin"><u>O</u>rigin</label>
        <input
          type="text"
          id="origin"
          name="origin"
          minlength="3"
          maxlength="10"
          placeholder="[origin]"
        />
      </div>
      <div class="flex flex-col">
        <label for="destination"><u>D</u>estination</label>
        <input
          type="text"
          id="destination"
          name="destination"
          placeholder="[destination]"
        />
      </div>
      <!-- date range picker -->
      <fieldset class="grid grid-cols-2 gap-5">
        <div class="flex flex-col mb-2">
          <label for="start_date"><u>S</u>tart Date</label>
          <input type="date" id="start_date" />
        </div>
        <div class="flex flex-col">
          <label for="end_date"><u>E</u>nd Date</label>
          <input type="date" id="end_date" />
        </div>
      </fieldset>
      <!-- allow any number of weight/rate inputs -->
      <template id="rate-input">
        <div class="grid grid-cols-2 gap-5">
          <div class="flex flex-col">
            <label class="text-right" for="weight">Weight</label>
            <input
              type="number"
              step="0.01"
              class="text-right"
              id="weight"
              name="weight"
              placeholder="[weight]"
            />
          </div>
          <div class="flex flex-col">
            <label class="text-right" for="rate">Rate</label>
            <input
              type="number"
              step="0.01"
              class="text-right"
              id="rate"
              name="rate"
              placeholder="[rate]"
            />
          </div>
        </div>
      </template>
      <div class="grid grid-cols-2 gap-5">
        <button type="button" onclick="addRateItem()">
          <u>A</u>dd Weight Rate
        </button>
        <button type="submit" class="btn-primary">
          <ruby
            >Save<rt><kbd>ctrl</kbd>+<kbd>s</kbd></rt></ruby
          >
        </button>
      </div>
    </form>
    <script>
      function addRateItem() {
        console.log("addRateItem")
        const rateInput = document.querySelector("#rate-input")
        const rateInputClone = rateInput.content.cloneNode(true)
        rateInput.parentElement.insertBefore(rateInputClone, rateInput)
        setTimeout(() => {
          // get list of weight inputs
          const weightInputs =
            rateInput.parentElement.querySelectorAll("#weight")
          // get last weight input
          const lastWeightInput = weightInputs[weightInputs.length - 1]
          lastWeightInput.focus()
        }, 100)
      }
      addRateItem()

      function keyDownHandler(event) {
        console.log("keyDownHandler")
        if (!event.altKey && !event.ctrlKey) {
          return
        }

        if (event.ctrlKey) {
          switch (event.key) {
            case "s":
              document.querySelector("button[type='submit']").click()
              break
            default:
              return
          }
        } else if (event.altKey) {
          switch (event.key) {
            case "a":
              addRateItem()
              break
            case "o":
              document.querySelector("#origin").focus()
              break
            case "d":
              document.querySelector("#destination").focus()
              break
            case "f":
              document.querySelector("#freight_code").focus()
              break
            case "s":
              document.querySelector("#start_date").focus()
              break
            case "e":
              document.querySelector("#end_date").focus()
              break
            default:
              return
          }
        }

        /* prevent the browser from doing its default thing */
        event.preventDefault()
      }

      document.addEventListener("keydown", keyDownHandler)
    </script>
  </body>
</html>
